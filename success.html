<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Confirmed - EchoGift</title>
    <meta name="description" content="Your personalized song order has been confirmed. We'll start creating your custom song gift right away!">
    <meta name="robots" content="noindex, nofollow">
    <link rel="canonical" href="https://echogifts.shop/success.html">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prata:wght@400&family=Lato:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation Header -->
    <header class="main-header">
        <div class="container">
            <nav class="main-nav">
                <a href="index.html" class="logo">EchoGift</a>
                <div class="nav-menu">
                    <a href="about.html" class="nav-link">About</a>
                    <a href="gallery.html" class="nav-link"><svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M210.3,56.34l-80-24A8,8,0,0,0,120,40V148.26A48,48,0,1,0,136,184V98.75l69.7,20.91A8,8,0,0,0,216,112V64A8,8,0,0,0,210.3,56.34ZM88,216a32,32,0,1,1,32-32A32,32,0,0,1,88,216ZM200,101.25l-64-19.2V50.75L200,70Z"/></svg>
                        Gallery</a>
                    <a href="single-song.html" class="nav-link">Single Song ($49.99)</a>
                    <a href="album-gift.html" class="nav-link">Album Gift ($199.99)</a>
                    <a href="blog.html" class="nav-link"><svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.68,147.31,64l24-24L216,84.68Z"/></svg>
                        Blog</a>
                    <a href="index.html#order" class="nav-cta">Order Now</a>
                </div>
                <div class="mobile-menu-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </nav>
        </div>
    </header>

    <!-- Success Hero Section -->
    <section style="background: var(--gradient-warm); padding: 120px 0; position: relative; overflow: hidden;">
        <!-- Premium Background Layer -->
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: url('assets/premium/hero_emotional/joy_through_tears_premium.jpg') center center / cover no-repeat; opacity: 0.08;"></div>
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: var(--gradient-subtle);"></div>
        <div class="container" style="position: relative; z-index: 3;">
            <div style="max-width: 700px; margin: 0 auto; text-align: center;">
                <div style="width: 80px; height: 80px; background: var(--gradient-luxury); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 32px; box-shadow: var(--shadow-lg);">
                    <span style="font-size: 40px; color: white;"><svg style="width: 40px; height: 40px; fill: white;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="m229.66,77.66-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"/></svg></span>
                </div>
                <h1 style="font-family: 'Prata', serif; font-size: clamp(2.5rem, 5vw, 3.5rem); color: var(--deep-indigo); margin-bottom: 24px; line-height: 1.2;">Order Confirmed!</h1>
                <p style="font-size: 20px; color: var(--text-secondary); line-height: 1.6;">Thank you for your order. We're excited to create your personalized song gift!</p>
            </div>
        </div>
    </section>

    <!-- Order Details Section -->
    <section style="padding: 100px 0; background: white; position: relative;">
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: url('assets/premium/premium_textures/elegant_beige_marble_luxury.jpg') center center / cover no-repeat; opacity: 0.02;"></div>
        <div class="container" style="position: relative; z-index: 2;">
            <div style="max-width: 800px; margin: 0 auto;">
                <div style="background: rgba(255, 255, 255, 0.9); border-radius: 16px; padding: 48px; box-shadow: var(--shadow-lg); backdrop-filter: blur(20px); border: 1px solid rgba(232, 201, 207, 0.2);">
                
                    <h2 style="font-family: 'Prata', serif; color: var(--deep-indigo); font-size: clamp(1.8rem, 3vw, 2.5rem); margin-bottom: 32px; text-align: center;">Order Details</h2>
                    
                    <div style="display: grid; gap: 24px; margin-bottom: 40px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px 0; border-bottom: 1px solid rgba(232, 201, 207, 0.3);">
                            <span style="font-family: 'Lato', sans-serif; font-weight: 500; color: var(--text-secondary);">Order Number:</span>
                            <span id="order-id" style="font-family: 'Lato', sans-serif; font-weight: 600; color: var(--deep-indigo);">EG-1234567890</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px 0; border-bottom: 1px solid rgba(232, 201, 207, 0.3);">
                            <span style="font-family: 'Lato', sans-serif; font-weight: 500; color: var(--text-secondary);">Product:</span>
                            <span id="product-name" style="font-family: 'Lato', sans-serif; font-weight: 600; color: var(--deep-indigo);">Personalized Song</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px 0; border-bottom: 1px solid rgba(232, 201, 207, 0.3);">
                            <span style="font-family: 'Lato', sans-serif; font-weight: 500; color: var(--text-secondary);">Total Paid:</span>
                            <span id="amount-paid" style="font-family: 'Lato', sans-serif; font-weight: 600; color: var(--terracotta); font-size: 18px;">$81.30</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px 0; border-bottom: 1px solid rgba(232, 201, 207, 0.3);">
                            <span style="font-family: 'Lato', sans-serif; font-weight: 500; color: var(--text-secondary);">Email:</span>
                            <span id="customer-email" style="font-family: 'Lato', sans-serif; font-weight: 600; color: var(--deep-indigo);">customer@example.com</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px 0;">
                            <span style="font-family: 'Lato', sans-serif; font-weight: 500; color: var(--text-secondary);">Estimated Delivery:</span>
                            <span id="delivery-date" style="font-family: 'Lato', sans-serif; font-weight: 600; color: var(--deep-indigo);">Monday, January 15, 2024</span>
                        </div>
                    </div>

                    <h3 style="font-family: 'Prata', serif; color: var(--deep-indigo); font-size: clamp(1.5rem, 2.5vw, 2rem); margin-bottom: 32px; text-align: center;">What Happens Next?</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 32px;">
                        <div style="text-align: center; padding: 24px;">
                            <div style="width: 60px; height: 60px; background: var(--gradient-luxury); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; color: white; font-family: 'Prata', serif; font-size: 24px; font-weight: 600;">1</div>
                            <h4 style="font-family: 'Prata', serif; color: var(--deep-indigo); font-size: 18px; margin-bottom: 12px;">We Start Creating</h4>
                            <p style="font-family: 'Lato', sans-serif; color: var(--text-secondary); line-height: 1.6; font-size: 16px;">Our AI begins crafting your personalized song using the story and details you provided.</p>
                        </div>
                        <div style="text-align: center; padding: 24px;">
                            <div style="width: 60px; height: 60px; background: var(--gradient-luxury); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; color: white; font-family: 'Prata', serif; font-size: 24px; font-weight: 600;">2</div>
                            <h4 style="font-family: 'Prata', serif; color: var(--deep-indigo); font-size: 18px; margin-bottom: 12px;">Quality Review</h4>
                            <p style="font-family: 'Lato', sans-serif; color: var(--text-secondary); line-height: 1.6; font-size: 16px;">Our team reviews the song to ensure it meets our high standards and captures your story perfectly.</p>
                            </div>
                        </div>
                        <div style="text-align: center; padding: 24px;">
                            <div style="width: 60px; height: 60px; background: var(--gradient-luxury); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; color: white; font-family: 'Prata', serif; font-size: 24px; font-weight: 600;">3</div>
                            <h4 style="font-family: 'Prata', serif; color: var(--deep-indigo); font-size: 18px; margin-bottom: 12px;">Delivery</h4>
                            <p style="font-family: 'Lato', sans-serif; color: var(--text-secondary); line-height: 1.6; font-size: 16px;">You'll receive your custom song via email within 2 business days, ready to share and enjoy!</p>
                        </div>
                    </div>
                    
                    <div style="background: rgba(232, 201, 207, 0.1); border-radius: 12px; padding: 32px; margin-top: 48px; text-align: center;">
                        <h3 style="font-family: 'Prata', serif; color: var(--deep-indigo); font-size: 20px; margin-bottom: 16px;">Questions or Concerns?</h3>
                        <p style="font-family: 'Lato', sans-serif; color: var(--text-secondary); line-height: 1.6; font-size: 16px;">We're here to help! Contact us at <a href="mailto:hello@echogifts.shop" style="color: var(--terracotta); text-decoration: none; font-weight: 600;">hello@echogifts.shop</a> or reference your order number <span id="order-reference" style="font-weight: 600; color: var(--deep-indigo);">EG-1234567890</span> in any correspondence.</p>
                    </div>

                    <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-top: 40px;">
                        <a href="index.html" class="cta-button" style="min-width: 280px;">Create Another Song</a>
                        <a href="mailto:?subject=I just ordered a personalized song!&body=I just ordered a custom song from EchoGift! Check them out at echogifts.shop" class="cta-button secondary" style="min-width: 280px;">Share with Friends</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3>EchoGift</h3>
                    <p>Your story, your song.</p>
                </div>
                <div class="footer-links">
                    <a href="blog.html">Blog</a>
                    <a href="terms-of-service.html">Terms of Service</a>
                    <a href="privacy-policy.html">Privacy Policy</a>
                    <a href="mailto:hello@echogifts.shop">Contact</a>
                </div>
                <div class="footer-social">
                    <a href="#" aria-label="Facebook"><svg class="social-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M128,24A104,104,0,1,0,232,128,104.13,104.13,0,0,0,128,24Zm8,191.63V152h24a8,8,0,0,0,0-16H136V112a16,16,0,0,1,16-16h16a8,8,0,0,0,0-16H152a32,32,0,0,0-32,32v24H96a8,8,0,0,0,0,16h24v63.63a88,88,0,1,1,16,0Z"/></svg></a>
                    <a href="#" aria-label="Instagram"><svg class="social-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M208,56H180.28L166.65,35.56A8,8,0,0,0,160,32H96a8,8,0,0,0-6.65,3.56L75.71,56H48A24,24,0,0,0,24,80V192a24,24,0,0,0,24,24H208a24,24,0,0,0,24-24V80A24,24,0,0,0,208,56Zm8,136a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V80a8,8,0,0,1,8-8H80a8,8,0,0,0,6.66-3.56L100.28,48h55.43l13.63,20.44A8,8,0,0,0,176,72h32a8,8,0,0,1,8,8ZM128,88a44,44,0,1,0,44,44A44.05,44.05,0,0,0,128,88Zm0,72a28,28,0,1,1,28-28A28,28,0,0,1,128,160Z"/></svg></a>
                    <a href="#" aria-label="Twitter"><svg class="social-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M247.39,68.94A8,8,0,0,0,240,64H209.57A48.66,48.66,0,0,0,168.1,40a46.91,46.91,0,0,0-33.75,13.7A47.9,47.9,0,0,0,120,88v6.09C79.74,83.47,46.81,50.72,46.46,50.37a8,8,0,0,0-13.65,4.92c-4.31,47.79,9.57,79.77,22,98.18a110.93,110.93,0,0,0,21.88,24.2c-15.23,17.53-39.21,26.74-39.47,26.84a8,8,0,0,0-3.85,11.93c.75,1.12,3.75,5.05,11.08,8.72C53.51,229.7,65.48,232,80,232c70.67,0,129.72-54.42,135.75-124.44l29.91-29.9A8,8,0,0,0,247.39,68.94Zm-45.54,40.2a8,8,0,0,0-2.32,5.14C196,180.5,144.05,216,80,216c-8.06,0-15-1.12-20.62-2.54a111.14,111.14,0,0,0,35.81-18.54,8,8,0,0,0-.30-14.02c-.38-.2-38.47-20.42-48.65-70.84,17.29,8.17,45.66,16.69,88.19,5.47a8,8,0,0,0,6.66-9.8A31.81,31.81,0,0,1,136,88a32,32,0,0,1,32-32c16.16,0,32,14.78,32,32v32Z"/></svg></a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 EchoGift. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>

    <script src="https://js.stripe.com/v3/"></script>
    <script>
        // Stripe configuration
        const stripe = Stripe('pk_live_51RTWhNEinaZMSMtjUEnWpzUPDC8KZBlFOy9O4Is2iG6KDg0CrCLszCw8QksowdNQcUyFdp8BIuWmSPMYueau2t5200ayCjCLBw');
        
        // Load confirmation data and populate page
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const sessionId = urlParams.get('session_id');
            
            if (sessionId) {
                // Coming from Stripe Checkout
                retrieveStripeSession(sessionId);
            } else {
                // Try to load from sessionStorage (fallback)
                const confirmationData = JSON.parse(sessionStorage.getItem('confirmationData') || '{}');
                
                if (!confirmationData.orderId) {
                    // No confirmation data, redirect to home
                    window.location.href = 'index.html';
                    return;
                }

                populateOrderDetails(confirmationData);
            }
        });
        

        async function retrieveStripeSession(sessionId) {
            try {
                // Note: In production, you'd need a server endpoint to retrieve session details
                // For now, we'll create mock data based on sessionStorage order data
                const orderData = JSON.parse(sessionStorage.getItem('orderData') || '{}');
                
                const confirmationData = {
                    orderId: 'EG-' + sessionId.substring(-8),
                    amount: orderData.productType === 'single' ? 49.99 : 199.99,
                    product: orderData.productType === 'single' ? 'Personalized Song' : 'Custom Song Album',
                    email: orderData.email || 'customer@example.com',
                    estimatedDelivery: getEstimatedDelivery(),
                    sessionId: sessionId
                };
                
                populateOrderDetails(confirmationData);
                
                // Clear order data after successful payment
                sessionStorage.removeItem('orderData');
                
                // Show success message
                showSuccessMessage('Payment successful! Your order has been confirmed.');
                
            } catch (error) {
                console.error('Error retrieving session:', error);
                // Fallback to basic confirmation
                populateOrderDetails({
                    orderId: 'EG-' + Date.now(),
                    amount: 49.99,
                    product: 'Personalized Song',
                    email: 'customer@example.com',
                    estimatedDelivery: getEstimatedDelivery()
                });
            }
        }

        function populateOrderDetails(confirmationData) {
            document.getElementById('order-id').textContent = confirmationData.orderId;
            document.getElementById('order-reference').textContent = confirmationData.orderId;
            
            document.getElementById('product-name').textContent = confirmationData.product;
            document.getElementById('amount-paid').textContent = `$${confirmationData.amount.toFixed(2)}`;
            document.getElementById('customer-email').textContent = confirmationData.email;
            document.getElementById('delivery-date').textContent = confirmationData.estimatedDelivery;
        }

        function getEstimatedDelivery() {
            const deliveryDate = new Date();
            deliveryDate.setDate(deliveryDate.getDate() + 2); // 2 business days
            return deliveryDate.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }

        function showSuccessMessage(message) {
            // Create success message element
            const messageDiv = document.createElement('div');
            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #27AE60;
                color: white;
                padding: 16px 24px;
                border-radius: 12px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1000;
                font-weight: 500;
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            messageDiv.textContent = message;
            
            document.body.appendChild(messageDiv);
            
            // Animate in
            setTimeout(() => {
                messageDiv.style.transform = 'translateX(0)';
            }, 100);
            
            // Remove after 5 seconds
            setTimeout(() => {
                messageDiv.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (messageDiv.parentNode) {
                        messageDiv.parentNode.removeChild(messageDiv);
                    }
                }, 300);
            }, 5000);
        }

        // Prevent back button after successful order
        history.pushState(null, null, location.href);
        window.onpopstate = function () {
            history.go(1);
        };
    </script>
</body>
</html>